<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>CodeIgniter Signed Url | michalsn</title><meta name=keywords content="signed-url,htmx,codeigniter4"><meta name=description content="Signing URLs may be very useful when we want to prevent manual URL manipulation or when the given address should have an expiration date. CodeIgniter Signed URL package makes it very easy."><meta name=author content><link rel=canonical href=https://michalsn.dev/posts/codeigniter-signed-url/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b9ff4cc257e914dab489bd18086151800e18f91456a5174bf28489210227a659.css integrity="sha256-uf9MwlfpFNq0ib0YCGFRgA4Y+RRWpRdL8oSJIQInplk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://michalsn.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://michalsn.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://michalsn.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://michalsn.dev/apple-touch-icon.png><link rel=mask-icon href=https://michalsn.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.110.0"><script async src="https://www.googletagmanager.com/gtag/js?id=G-74HSH0WCPE"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-74HSH0WCPE",{anonymize_ip:!1})}</script><meta property="og:title" content="CodeIgniter Signed Url"><meta property="og:description" content="Signing URLs may be very useful when we want to prevent manual URL manipulation or when the given address should have an expiration date. CodeIgniter Signed URL package makes it very easy."><meta property="og:type" content="article"><meta property="og:url" content="https://michalsn.dev/posts/codeigniter-signed-url/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-28T10:11:43+01:00"><meta property="article:modified_time" content="2022-12-28T10:11:43+01:00"><meta property="og:site_name" content="michalsn"><meta name=twitter:card content="summary"><meta name=twitter:title content="CodeIgniter Signed Url"><meta name=twitter:description content="Signing URLs may be very useful when we want to prevent manual URL manipulation or when the given address should have an expiration date. CodeIgniter Signed URL package makes it very easy."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://michalsn.dev/posts/"},{"@type":"ListItem","position":2,"name":"CodeIgniter Signed Url","item":"https://michalsn.dev/posts/codeigniter-signed-url/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"CodeIgniter Signed Url","name":"CodeIgniter Signed Url","description":"Signing URLs may be very useful when we want to prevent manual URL manipulation or when the given address should have an expiration date. CodeIgniter Signed URL package makes it very easy.\n","keywords":["signed-url","htmx","codeigniter4"],"articleBody":"Signing URLs may be very useful when we want to prevent manual URL manipulation or when the given address should have an expiration date. CodeIgniter Signed URL package makes it very easy.\nI have build this library for one particular reason. Some time ago I started experimenting with HTMX and Controlled Cells. These last one will be introduced in CodeIgniter 4.3.\nAnyway, I created some really basic counter component. You can find it in the HTMX demos repo. And one think bodered me. Setting the starting number for the counter was very easy, but what wasn’t so easy was setting a custom number by which the counter would increment. Let’s see the example:\n\u003c?php namespace Michalsn\\CodeIgniterDemoHtmx\\Cells\\Counter; use CodeIgniter\\View\\Cells\\Cell; class CounterCell extends Cell { public $count = 0; /** * Increment * * @return void */ public function increment() { $this-\u003ecount++; return $this-\u003erender(); } /** * Decrement * * @return void */ public function decrement() { $this-\u003ecount--; return $this-\u003erender(); } } The view part:\n... \u003cdiv class=\"card-body\"\u003e \u003cdiv class=\"input-group\"\u003e \u003cinput type=\"text\" class=\"form-control\" value=\"\u003c?= $count; ?\u003e\"\u003e \u003cbutton class=\"btn btn-primary\" type=\"button\" hx-get=\"\u003c?= site_url('cells/counter/increment?count=' . $count); ?\u003e\" hx-swap=\"morph:outerHTML\" hx-target=\"closest .card\"\u003e + \u003c/button\u003e \u003cbutton class=\"btn btn-secondary\" type=\"button\" hx-get=\"\u003c?= site_url('cells/counter/decrement?count=' . $count); ?\u003e\" hx-swap=\"morph:outerHTML\" hx-target=\"closest .card\"\u003e - \u003c/button\u003e \u003c/div\u003e \u003c/div\u003e ... And the initial component call, with two separate instances:\n... \u003cdiv class=\"row justify-content-md-center mb-3\"\u003e \u003cdiv class=\"col-sm-6 col-lg-3\"\u003e \u003c?= view_cell('Michalsn\\CodeIgniterDemoHtmx\\Cells\\Counter\\CounterCell'); ?\u003e \u003c/div\u003e \u003cdiv class=\"col-sm-6 col-lg-3\"\u003e \u003c?= view_cell('Michalsn\\CodeIgniterDemoHtmx\\Cells\\Counter\\CounterCell', ['count' =\u003e 5]); ?\u003e \u003c/div\u003e \u003c/div\u003e ... Your first impression would be probably something like - that’s quite easy task. Just add another variable, like $incrementNumber and call it a day. Well… yes and no.\nIf we leave it just like that, anyone will be able to edit the URL and increment counter by any number. The point is that we don’t want users to be able to change the number by which we will increment the counter in an instance. And this is the time when Signed URLs come to the rescue.\nLet’s edit Controlled Cell first:\n\u003c?php namespace Michalsn\\CodeIgniterDemoHtmx\\Cells\\Counter; use CodeIgniter\\View\\Cells\\Cell; class CounterCell extends Cell { public $count = 0; public $incrementNumber = 1; /** * Increment * * @return void */ public function increment() { $this-\u003ecount += $this-\u003eincrementNumber; return $this-\u003erender(); } /** * Decrement * * @return void */ public function decrement() { $this-\u003ecount -= $this-\u003eincrementNumber; return $this-\u003erender(); } } Now the view part. We will change the way URLs are generated with call to the signedurl() helper:\n... \u003cdiv class=\"card-body\"\u003e \u003cdiv class=\"input-group\"\u003e \u003cinput type=\"text\" class=\"form-control\" value=\"\u003c?= $count; ?\u003e\"\u003e \u003cbutton class=\"btn btn-primary\" type=\"button\" hx-get=\"\u003c?= signedurl()-\u003esiteUrl('cells/counter/increment?count=' . $count . '\u0026incrementNumber=' . $incrementNumber); ?\u003e\" hx-swap=\"morph:outerHTML\" hx-target=\"closest .card\"\u003e + \u003c/button\u003e \u003cbutton class=\"btn btn-secondary\" type=\"button\" hx-get=\"\u003c?= signedurl()-\u003esiteUrl('cells/counter/decrement?count=' . $count . '\u0026incrementNumber=' . $incrementNumber); ?\u003e\" hx-swap=\"morph:outerHTML\" hx-target=\"closest .card\"\u003e - \u003c/button\u003e \u003c/div\u003e \u003c/div\u003e ... And our initial component calls:\n... \u003cdiv class=\"row justify-content-md-center mb-3\"\u003e \u003cdiv class=\"col-sm-6 col-lg-3\"\u003e \u003c?= view_cell('Michalsn\\CodeIgniterDemoHtmx\\Cells\\Counter\\CounterCell'); ?\u003e \u003c/div\u003e \u003cdiv class=\"col-sm-6 col-lg-3\"\u003e \u003c?= view_cell('Michalsn\\CodeIgniterDemoHtmx\\Cells\\Counter\\CounterCell', ['count' =\u003e 5, 'incrementNumber' =\u003e 5]); ?\u003e \u003c/div\u003e \u003c/div\u003e ... Now we can be sure that no one will manipulate the URL, and components will work the way we initailized them. Of course, we also need a Filter to validate signed URLs, but you can read in the docs on how to use it.\n","wordCount":"528","inLanguage":"en","datePublished":"2022-12-28T10:11:43+01:00","dateModified":"2022-12-28T10:11:43+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://michalsn.dev/posts/codeigniter-signed-url/"},"publisher":{"@type":"Organization","name":"michalsn","logo":{"@type":"ImageObject","url":"https://michalsn.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://michalsn.dev/ accesskey=h title="michalsn (Alt + H)">michalsn</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://michalsn.dev/archives title=Archive><span>Archive</span></a></li><li><a href=https://michalsn.dev/tags title=Tags><span>Tags</span></a></li><li><a href=https://michalsn.dev/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>CodeIgniter Signed Url</h1><div class=post-meta>December 28, 2022&nbsp;·&nbsp;3 min</div></header><div class=post-content><p>Signing URLs may be very useful when we want to prevent manual URL manipulation or when the given address should have an expiration date. <a href=https://github.com/michalsn/codeigniter-signed-url>CodeIgniter Signed URL</a> package makes it very easy.</p><p>I have build this library for one particular reason. Some time ago I started experimenting with HTMX and Controlled Cells. These last one will be introduced in CodeIgniter 4.3.</p><p>Anyway, I created some really basic counter component. You can find it in the <a href=https://github.com/michalsn/codeigniter-htmx-demo>HTMX demos</a> repo. And one think bodered me. Setting the starting number for the counter was very easy, but what wasn&rsquo;t so easy was setting a custom number by which the counter would increment. Let&rsquo;s see the example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Michalsn\CodeIgniterDemoHtmx\Cells\Counter</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>CodeIgniter\View\Cells\Cell</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CounterCell</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Cell</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> $count <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * Increment
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     *
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * @return void
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>increment</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>count</span><span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>render</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * Decrement
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     *
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * @return void
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>decrement</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>count</span><span style=color:#f92672>--</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>render</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The view part:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>...
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;card-body&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;input-group&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;form-control&#34;</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&lt;?= $count; ?&gt;&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn btn-primary&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-get</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&lt;?= site_url(&#39;cells/counter/increment?count=&#39; . $count); ?&gt;&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-swap</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;morph:outerHTML&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-target</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closest .card&#34;</span>&gt;
</span></span><span style=display:flex><span>                +
</span></span><span style=display:flex><span>             &lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn btn-secondary&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-get</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&lt;?= site_url(&#39;cells/counter/decrement?count=&#39; . $count); ?&gt;&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-swap</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;morph:outerHTML&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-target</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closest .card&#34;</span>&gt;
</span></span><span style=display:flex><span>                -
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>And the initial component call, with two separate instances:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>...
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row justify-content-md-center mb-3&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;col-sm-6 col-lg-3&#34;</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;?= view_cell(&#39;Michalsn\CodeIgniterDemoHtmx\Cells\Counter\CounterCell&#39;); ?&gt;</span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;col-sm-6 col-lg-3&#34;</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;?= view_cell(&#39;Michalsn\CodeIgniterDemoHtmx\Cells\Counter\CounterCell&#39;, [&#39;count&#39; =&gt; 5]); ?&gt;</span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Your first impression would be probably something like - that&rsquo;s quite easy task. Just add another variable, like <code>$incrementNumber</code> and call it a day. Well&mldr; yes and no.</p><p>If we leave it just like that, anyone will be able to edit the URL and increment counter by any number. The point is that we don&rsquo;t want users to be able to change the number by which we will increment the counter in an instance. And this is the time when Signed URLs come to the rescue.</p><p>Let&rsquo;s edit Controlled Cell first:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>Michalsn\CodeIgniterDemoHtmx\Cells\Counter</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>CodeIgniter\View\Cells\Cell</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CounterCell</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Cell</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> $count <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> $incrementNumber <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * Increment
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     *
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * @return void
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>increment</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>count</span> <span style=color:#f92672>+=</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>incrementNumber</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>render</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * Decrement
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     *
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * @return void
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>decrement</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>count</span> <span style=color:#f92672>-=</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>incrementNumber</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>render</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now the view part. We will change the way URLs are generated with call to the <code>signedurl()</code> helper:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>...
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;card-body&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;input-group&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;form-control&#34;</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&lt;?= $count; ?&gt;&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn btn-primary&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-get</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&lt;?= signedurl()-&gt;siteUrl(&#39;cells/counter/increment?count=&#39; . $count . &#39;&amp;incrementNumber=&#39; . $incrementNumber); ?&gt;&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-swap</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;morph:outerHTML&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-target</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closest .card&#34;</span>&gt;
</span></span><span style=display:flex><span>                +
</span></span><span style=display:flex><span>             &lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn btn-secondary&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-get</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&lt;?= signedurl()-&gt;siteUrl(&#39;cells/counter/decrement?count=&#39; . $count . &#39;&amp;incrementNumber=&#39; . $incrementNumber); ?&gt;&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-swap</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;morph:outerHTML&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>hx-target</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closest .card&#34;</span>&gt;
</span></span><span style=display:flex><span>                -
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>And our initial component calls:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>...
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row justify-content-md-center mb-3&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;col-sm-6 col-lg-3&#34;</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;?= view_cell(&#39;Michalsn\CodeIgniterDemoHtmx\Cells\Counter\CounterCell&#39;); ?&gt;</span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;col-sm-6 col-lg-3&#34;</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;?= view_cell(&#39;Michalsn\CodeIgniterDemoHtmx\Cells\Counter\CounterCell&#39;, [&#39;count&#39; =&gt; 5, &#39;incrementNumber&#39; =&gt; 5]); ?&gt;</span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Now we can be sure that no one will manipulate the URL, and components will work the way we initailized them. Of course, we also need a Filter to validate signed URLs, but you can read in the <a href=https://michalsn.github.io/codeigniter-signed-url/filters/>docs</a> on how to use it.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://michalsn.dev/tags/signed-url/>signed-url</a></li><li><a href=https://michalsn.dev/tags/htmx/>htmx</a></li><li><a href=https://michalsn.dev/tags/codeigniter4/>codeigniter4</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://michalsn.dev/>michalsn</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>